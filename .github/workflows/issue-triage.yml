name: Issue Triage

on:
  issues:
    types: [opened, labeled, unlabeled]
  pull_request_target:
    types: [opened, labeled, unlabeled]

jobs:
  # ========================================
  # ä½œä¸š: è‡ªåŠ¨æ ‡è®°å’Œåˆ†ç±»
  # ========================================
  auto-label:
    name: Auto Label Issues and PRs
    runs-on: ubuntu-latest
    
    permissions:
      contents: read
      issues: write
      pull-requests: write

    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4

    - name: è‡ªåŠ¨æ·»åŠ æ ‡ç­¾
      uses: actions/labeler@v5
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}
        configuration-path: .github/labeler.yml
        sync-labels: true

  # ========================================
  # ä½œä¸š: æ–°é—®é¢˜æ¬¢è¿ä¿¡æ¯
  # ========================================
  welcome-message:
    name: Welcome Message for New Issues
    runs-on: ubuntu-latest
    
    if: github.event_name == 'issues' && github.event.action == 'opened'
    
    permissions:
      issues: write

    steps:
    - name: æ·»åŠ æ¬¢è¿è¯„è®º
      uses: actions/github-script@v7
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        script: |
          github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: `## ğŸ‘‹ æ¬¢è¿æäº¤ Issueï¼

æ„Ÿè°¢æ‚¨èŠ±æ—¶é—´æäº¤è¿™ä¸ªé—®é¢˜ï¼æˆ‘ä»¬ä¼šå°½å¿«æŸ¥çœ‹å¹¶å›å¤ã€‚

### ğŸ“‹ è¯·ç¡®ä¿æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **é—®é¢˜æè¿°**ï¼šè¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜
2. **å¤ç°æ­¥éª¤**ï¼šå¦‚ä½•å¤ç°è¿™ä¸ªé—®é¢˜
3. **é¢„æœŸè¡Œä¸º**ï¼šæ‚¨æœŸæœ›å‘ç”Ÿä»€ä¹ˆ
4. **å®é™…è¡Œä¸º**ï¼šå®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
5. **ç¯å¢ƒä¿¡æ¯**ï¼š
   - æ“ä½œç³»ç»Ÿï¼š
   - Python ç‰ˆæœ¬ï¼š
   - Node.js ç‰ˆæœ¬ï¼š
   - æµè§ˆå™¨ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼š
6. **æˆªå›¾/æ—¥å¿—**ï¼šå¦‚æœ‰ç›¸å…³çš„æˆªå›¾æˆ–æ—¥å¿—ï¼Œè¯·ä¸€å¹¶é™„ä¸Š

---

å¦‚æœæ‚¨å‘ç°è¿™æ˜¯ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼Œè¯·ä¸è¦åœ¨æ­¤å…¬å¼€æŠ¥å‘Šï¼Œè¯·ç›´æ¥å‘é€é‚®ä»¶è‡³ï¼šsecurity@example.com`
          })
